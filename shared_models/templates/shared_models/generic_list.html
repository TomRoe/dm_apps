{% extends 'pop_base.html' %}

{% load i18n %}
{% load verbose_names %}
{% load custom_tags %}

{% block body %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{% url 'shared_models:index' %}">
                    home
                </a>
            </li>

        </ol>
    </nav>
    <div class="container">
        <div class="mb-4">
            <h1>
                {{ title }}
            </h1>
        </div>

        <div class="table-stuff mb-4">
            <div class="row">
                <div class="col">
                    {% trans "(click on a header to sort table)" %}
                </div>
                <div class="col" style="text-align: right; padding-bottom: 10px">
                    {% echo "shared_models:"|add:model_name|add:"_new" as my_var1 %}
                    <a href="{% url my_var1 %}" class="btn btn-sm btn-primary">{% trans 'New' %}</a>
                </div>
            </div>
        </div>
        <table class="table table-sm table-hover table-bordered sortable">
            <thead>
            {% for field in field_list %}
                <th>
                    {% get_verbose_label random_object field %}
                </th>
            {% endfor %}

            </thead>
            <tbody>
            {% for object in object_list %}
                {% echo "shared_models:"|add:model_name|add:"_edit" as my_var2 %}

                <tr href="{% url my_var2 object.id %}">
                    {% for field in field_list %}
                        <td>
                            {% if field == 'region' and model_name == "section" %}
                                {{ object.division.branch.region.tname }}
                            {% elif field == 'region' and model_name == "division" %}
                                {{ object.branch.region.tname }}
                            {% elif field == 'region' and model_name == "branch" %}
                                {{ object.region.tname }}

                            {% elif field == 'branch' and model_name == "section" %}
                                {{ object.division.branch.tname }}
                            {% elif field == 'branch' and model_name == "division" %}
                                {{ object.branch.tname }}

                            {% elif field == 'division' and model_name == "section" %}
                                {{ object.division.tname }}


                            {% else %}

                                {% get_field_value object field %}
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}
