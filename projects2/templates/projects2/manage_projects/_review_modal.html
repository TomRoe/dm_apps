{% load i18n %}
{% load bootstrap4 %}
{% load custom_filters %}
{% load static %}
<!-- template for the modal component -->
<script type="text/x-template" id="review-modal-template">
<transition name="modal">
  <div class="modal-mask">
    <div class="modal-wrapper">
      <div class="modal-container">

        <div class="modal-header">
          <slot name="header">

            <h3 v-if="isOldReview">
              <span>{% trans "Edit Review" %}</span>
            </h3>
            <h3 v-else>
              <span>{% trans "Start a Review" %}</span>
            </h3>
            <br>

            <div v-if="errors" class="alert alert-danger" role="alert">
              <h4 class="alert-heading">
                {% trans "The form has a few errors:" %}
              </h4>
              <hr>
              <span v-html="errors"></span>
            </div>
          </slot>
        </div>

        <form method="post" @submit.prevent="onSubmit" class="form">
          <div class="modal-body">
            <slot name="body">
              <div class="mb-3">
                {% trans "Title:" %}
                <p class="h5" v-html="project_year.project.title"></p>
              </div>
              <div class="mb-3">
                {% trans "Review History:" %}
                <p class="h5" v-if="isOldReview" v-html="project_year.review.metadata"></p>
              </div>
              <hr>
              {% bootstrap_form review_form size='small' %}

            </slot>
          </div>
          <div class="modal-footer">
            <slot name="footer">
              <button v-if="isOldReview" class="modal-red-bold" @click="deleteReview" type="button">{% trans "Delete" %}</button>
              <button v-if="isOldReview" class="modal-default-button">{% trans "Update" %}</button>
              <button v-else class="modal-default-button">{% trans "Add" %}</button>
              <button class="modal-default-button" @click="$emit('close')" id="closeBtn" type="button">
                {% trans "Close" %}
              </button>
            </slot>
          </div>
        </form>
      </div>
    </div>
  </div>
</transition>
</script>
