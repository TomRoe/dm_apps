{% extends "projects2/base.html" %}
{% load static %}
{% load bootstrap4 %}
{% load verbose_names %}
{% load custom_filters %}
{% load i18n %}
{% load project_tags %}


{% block header %}
  {{ block.super }}

{% endblock %}

{% block subcontent %}
  <div id="app">
    <div class="row">

      <div class="col-2 toolbar py-3 px-3 ml-2">
        {% include "projects2/_project_console.html" %}
      </div>

      <div class="col">
        <div v-if="showOverview">
          <h4>
            {% trans "Overview" %}
          </h4>
          <table class="table table-sm">
            {% for field in project_field_list %}
              {% if "fiscal" in field %}
                <tr>
                  <th>{% trans "Project years" %}</th>
                  <td>
                    <ul>
                      {% for year in object.years.all %}
                        <li>{{ year }}</li>
                      {% empty %}
                        <em>This project has no fiscal years added yet.</em>
                      {% endfor %}

                    </ul>
                  </td>
                </tr>
              {% elif "overview" in field %}
                <tr>
                  <th>{% get_verbose_label object field %}</th>
                  <td>
                    {{ object.overview_html }}
                  </td>
                </tr>
              {% else %}
                {% verbose_td_display object field th_width="30%" td_width="70%" %}
              {% endif %}
            {% endfor %}
          </table>
        </div>

        <div v-if="!showOverview">
          <div v-if="py_loading" class="loading mb-3 mt-3 text-center mt-5">
            <div class="spinner-border mb-3" style="width: 10rem; height: 10rem;" role="status">
              <span class="sr-only"></span>
            </div>
          </div>

          <div v-if="projectYear">
            {% include "projects2/_project_year_detail.html" %}
          </div>


          <div v-else>
            <h3>Uh oh. something bad happened</h3>
          </div>
        </div>
      </div>


    </div>

  </div>

{% endblock %}


{% block body_js %}
  {{ block.super }}
  <script src="{% static '/projects2/mainProjectDetail.js' %}?version=0.0.3" type="application/javascript"></script>

{% endblock %}