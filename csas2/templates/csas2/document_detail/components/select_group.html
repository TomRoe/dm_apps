{% load i18n %}

<!-- template for the modal component -->
<script type="text/x-template" id="select-group-template">
<div class="form-group">
  <div class="form-group">
    <label :for="`id_${field_name}`">${label}</label>
    <v-select
      style="width: 100%"
      v-model="editableVal"
      @input="updateTracking"
      :options="choices"
      :reduce="choice => choice.value"
      label="text"
      :clearable="false"
      class="bg-light"
    >
  </div>
</div>
</script>
<script type="application/javascript">

Vue.component("select-group", {
  template: "#select-group-template",
  delimiters: ["${", "}"],
  name: "select-group",
  props: {
    val: {
      type: String,
      required: false
    },
    labels: {
      type: Object,
      required: true
    },
    field_name: {
      type: String,
      required: true
    },
    choices: {
      type: Array,
      required: true
    },
  },
  data() {
    return {
      editableVal: null,
    };
  },
  computed: {
    label() {
      return this.labels[this.field_name]
    }
  },
  methods: {
    updateTracking() {
      this.$emit("update-tracking", {field_name: this.field_name, value: this.editableVal});
    },
    clearDate() {
      this.date = null;
      this.updateTracking();
    },
  },
  created() {
    this.editableVal = this.val;
  }
});
</script>