{% load static %}
{% load i18n %}
<style>
    table, td {
        font-size: small;
    }
</style>

<h4>
    {% trans "Collaborators & Partners:" %}
</h4>
{% if not object.submitted %}
    <a class="btn btn-sm btn-primary" href="#"
       onclick="return popitup('{% url 'projects:collab_new' object.id %}','popoutWindow')">
        {% trans "Add Collaborator" %}
    </a><br><br>
{% endif %}

{% if object.collaborators.count == 0 %}
    <em>
        {% trans "No Collaborators or Partners" %}
    </em><br>
{% else %}

    <table class="table table-hover table-sm" style="width: auto">
        <tr>
            <th></th>
            <th>
                {% trans "Name" %}
            </th>
            <th>
                {% trans "Type" %}
            </th>
            <th>
                {% trans "Critical to project?" %}
            </th>


        </tr>
        <tbody>
        {% for obj in object.collaborators.all %}
            <tr data-toggle="tooltip" title="Edit" href="{% url 'projects:collab_edit' obj.id %}" pop>
                <td>
                    {% if not object.submitted %}
                        <a class="collab-delete-me" href="#" val="{{ obj.id }}">
                            <img src="{% static "/admin/img/icon-deletelink.svg" %}" data-toggle="tooltip"
                                 title="Delete">
                        </a>
                        <a id="collab-secrect-delete-btn-{{ obj.id }}"
                           href="{% url 'projects:collab_delete' obj.id %}" class="hidden"></a>
                    {% endif %}
                </td>
                <td>{{ obj.name }}</td>
                <td>{{ obj.get_type_display }}</td>
                <td style="text-align: center">{{ obj.critical|yesno }}</td>


            </tr>
        {% endfor %}
        {#    <tr style="font-weight: bold;">#}
        {#        <td>Count: <span style="margin-left: 15px">{{ object.collaborators.count }}</span></td>#}
        {#    </tr>#}
        </tbody>
    </table>
{% endif %}
<br>