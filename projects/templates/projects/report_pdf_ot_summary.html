{% load verbose_names %}
{% load bootstrap4 %}
{% load humanize %}
{% load custom_filters %}
{% load i18n %}

{% bootstrap_css %}

{% block extra_style %}
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
{% endblock %}

<style>
    .label {
        font-weight: bold;
    }

    .center-col {
        text-align: center;
    }

    .right-col {
        text-align: right;
    }

    table, td, th {
        border-bottom: 1px solid black;
        padding-top: 2px;
    }

    th {
        background-color: lightblue;
        font-weight: bold;
    }

    .total {
        background-color: lightgray;
        color: black;
        font-weight: bold;
    }

    .subtotal {
        background-color: lightgray;
        color: black;
        font-style: italic;
    }

    h1 {
        font-size: 24px;
    }
    h3 {
        font-size: 14px;
    }

    @page {
        size: legal;
        margin: 1cm;
        @frame footer {
        -pdf-frame-content: footerContent;
        bottom: 0cm;
        margin-left: 18cm;
        margin-right: 0cm;
        height: 1cm;
    }
    }

</style>


<div id="footerContent">
    {% block page_foot %}
        <pdf:pagenumber/>
    {% endblock %}
</div>

<div class="container-fluid">
    {# financial summary #}
    {% with "" as na %}

        <h1>{{ fy }} Overtime Hours By Section and Program </h1>
        <h3>** These hours and not summable since any given project can have multiple programs</h3>

{#        <table>#}
{#            <thead>#}
{#            <tr>#}
{#                <th style="width: 40%">Division</th>#}
{#                <th style="width: 40%">Section</th>#}
{#                <th class="right-col" style="width: 20%">Overtime Hours</th>#}
{#            </tr>#}
{##}
{#            </thead>#}
{#            <tbody>#}
{#            {% for division in division_list %}#}
{#                {% for section in division.sections.all %}#}
{#                    <tr>#}
{#                        {% if forloop.counter == 1 %}#}
{#                            <td rowspan="{% if division.sections.count > 0 %}{{ division.sections.count|add:1 }}{% else %}1{% endif %}">#}
{#                                {{ division }}#}
{#                            </td>#}
{#                        {% endif %}#}
{##}
{#                        <td>{{ section }}</td>#}
{#                        {% with financial_summary_data|lookup:"sections"|lookup:section.id as my_dict %}#}
{#                            {% if not my_dict or my_dict == "" %}#}
{#                                <td class="right-col">{{ na }}</td>#}
{#                            {% else %}#}
{#                                <td class="right-col">#}
{#                                    {{ my_dict|lookup:"OT"|zero2val:na|floatformat:0|intcomma }}#}
{#                                {{ my_dict }}#}
{#                                </td>#}
{#                            {% endif %}#}
{#                        {% endwith %}#}
{#                    </tr>#}
{#                {% endfor %}#}
{#                {% if division.sections.count > 0 %}#}
{#                    <tr>#}
{#                        {% with financial_summary_data|lookup:"divisions"|lookup:division.id as my_dict %}#}
{#                            <td class="total"><em>SUB-TOTAL</em></td>#}
{#                            <td class="total right-col">{{ my_dict|lookup:"OT"|zero2val:na|floatformat:0|intcomma }}</td>#}
{#                        {% endwith %}#}
{#                    </tr>#}
{#                {% endif %}#}
{#            {% endfor %}#}
{#            <tr>#}
{#                <td colspan="2" class="total">TOTAL</td>#}
{#                {% with financial_summary_data|lookup:"total" as my_dict %}#}
{#                    <td class="total right-col">{{ my_dict|lookup:"OT"|zero2val:na|floatformat:0|intcomma }}</td>#}
{#                {% endwith %}#}
{##}
{#            </tr>#}
{#            </tbody>#}
{##}
{##}
{#        </table>#}

    {% endwith %}
</div>
