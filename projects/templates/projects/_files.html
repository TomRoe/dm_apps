{% load static %}
{% load i18n %}
<style>
    table, td {
        font-size: small;
    }
</style>

<h4>
    {% trans "Supporting Resources:" %}
</h4>


{% if not report_mode %}
    <a class="btn btn-sm btn-primary" href="#"
       onclick="return popitup('{% url 'projects:file_new' project.id %}','popoutWindow')">
        {% trans "Add File" %}
    </a>
    <br><br>
{% endif %}
{% if project.files.count == 0 %}
    <em>
        {% trans "No Files" %}...
    </em><br>
{% else %}

    <table class="table table-hover table-sm" style="width: auto">
        <tr>
            <th>
                {% trans "Caption" %}
            </th>
            <th>
                {% trans "Date Created" %}
            </th>

        </tr>
        <tbody>
        {% for obj in project.files.all %}
            <tr {% if not report_mode %}data-toggle="tooltip" title="Edit" href="{% url 'projects:file_detail' obj.id %}" pop{% endif %}>
                <td>{{ obj.caption }}</td>
                <td>{{ obj.date_created }}</td>
                <td>
                    <a href="{{ obj.file.url }}" data-toggle="tooltip" title="Open the file" id="file_link">
                        <img src="{% static 'img/paperclip-1332775_1920.png' %}" alt="" width="20px">
                    </a>
                </td>

                </a>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
<br>
<script type="application/javascript">
    $("#file_link").click(function (e) {
        e.stopImmediatePropagation()
        e.preventDefault()
        window.location.href = $(this).attr("href")
    })
</script>