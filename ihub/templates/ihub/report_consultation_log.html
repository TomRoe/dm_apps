{% load verbose_names %}
{% load bootstrap4 %}
{% load humanize %}
{% load custom_filters %}
{% load i18n %}

{% bootstrap_css %}

{% block extra_style %}
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
{% endblock %}

<style>
    .label {
        font-weight: bold;
    }

    table, td, th {
        font-size: small;
        border: 1px solid black;
        text-align: left;
        border-collapse: collapse;
    }

    td, th {
        padding: 2px;
    }

    th {
    {#background-color: lightblue;#}{#color: white;#} border: 1px solid black;
        font-weight: bold;
    }

    .total {
    {#background-color: lightgray;#}{#color: black;#}
    }


    h1 {
        font-size: 24px;
    }

    @page {
        size: legal landscape;
        margin: 1cm;
        @frame footer {
        -pdf-frame-content: footerContent;
        bottom: 0cm;
        margin-left: 18cm;
        margin-right: 0cm;
        height: 1cm;
    }
    }

</style>


<div id="footerContent">
    {% block page_foot %}
        <pdf:pagenumber/>
    {% endblock %}
</div>


<h1>
    {{ report_title }} {% if fy and fy != "None" %} ({{ fy }}) {% endif %}
</h1>


<table>
    <thead>
    <th>
        Project / Location
    </th>
    <th>
        Proponent
    </th>
    <th>
        Date offer to Consult
    </th>
    <th>
        Other Departments Involved (Prov & Fed)
    </th>
    <th style="width: 40%">
        Project Status/ Correspondence / Notes
    </th>
    <th>
        Follow-up Actions required
    </th>
    </thead>

    {% for entry in entry_list %}
        <tr>
            <td>
                TITLE: {{ entry.title }}
                <br><br>
                TYPE: {{ entry.entry_type}}
                <br><br>
                LOCATION: {{ entry.location|nz:"----" }}
            </td>
            <td>
                ORGANIZATIONS: {{ entry.orgs_str }}
                <br><br>
                DFO SECTORS: {{ entry.sectors_str }}
            </td>
            <td>
                {{ entry.initial_date|date:"M d, Y" }}
            </td>
            <td>
                {% for person in entry.people.all %}
                    {{ person }}<br>
                {% endfor %}
            </td>
            <td>
                Overall status: {{ entry.status }}
                <br><br>
                {% for note in entry.other_notes %}
                    {{ note }}
                    <br><br>
                {% endfor %}

            </td>
            <td>
                {% for note in entry.followups %}
                    {{ note }}
                    <br><br>
                {% endfor %}
            </td>


        </tr>
    {% endfor %}

</table>



