# Generated by Django 3.1.2 on 2021-01-25 12:42

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import travel.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('shared_models', '0035_auto_20210114_0553'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Conference',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='trip title (English)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='trip title (French)')),
                ('is_adm_approval_required', models.BooleanField(choices=[(True, 'Yes'), (False, 'No')], default=False, verbose_name='does attendance to this require ADM approval?')),
                ('location', models.CharField(max_length=1000, null=True, verbose_name='location (city, province, country)')),
                ('has_event_template', models.IntegerField(blank=True, choices=[(None, '---------'), (1, 'Yes'), (0, 'No')], default=0, null=True, verbose_name='Is there an event template being completed for this conference or meeting?')),
                ('number', models.IntegerField(blank=True, null=True, verbose_name='event number')),
                ('start_date', models.DateTimeField(verbose_name='start date of event')),
                ('end_date', models.DateTimeField(verbose_name='end date of event')),
                ('meeting_url', models.URLField(blank=True, null=True, verbose_name='meeting URL')),
                ('abstract_deadline', models.DateTimeField(blank=True, null=True, verbose_name='abstract submission deadline')),
                ('registration_deadline', models.DateTimeField(blank=True, null=True, verbose_name='registration deadline')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='general notes')),
                ('is_verified', models.BooleanField(default=False, verbose_name='verified?')),
                ('cost_warning_sent', models.DateTimeField(blank=True, null=True)),
                ('admin_notes', models.TextField(blank=True, null=True, verbose_name='Administrative notes')),
                ('review_start_date', models.DateTimeField(blank=True, null=True, verbose_name='start date of the ADM review')),
                ('last_modified', models.DateTimeField(auto_now=True, verbose_name='last modified')),
                ('adm_review_deadline', models.DateTimeField(blank=True, null=True, verbose_name='ADM Office review deadline')),
                ('date_eligible_for_adm_review', models.DateTimeField(blank=True, null=True, verbose_name='Date when eligible for ADM Office review')),
                ('fiscal_year', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trips', to='shared_models.fiscalyear', verbose_name='fiscal year')),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trips_last_modified_by', to=settings.AUTH_USER_MODEL, verbose_name='last_modified_by')),
                ('lead', models.ForeignKey(editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='meeting_leads', to='shared_models.region', verbose_name='Which region is the lead on this trip?')),
            ],
            options={
                'verbose_name': 'trip',
                'verbose_name_plural': 'trips',
                'ordering': ['start_date'],
            },
        ),
        migrations.CreateModel(
            name='CostCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('order', models.IntegerField(blank=True, null=True)),
            ],
            options={
                'ordering': ['order', 'id'],
            },
        ),
        migrations.CreateModel(
            name='HelpText',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('field_name', models.CharField(max_length=255)),
                ('eng_text', models.TextField(verbose_name='English text')),
                ('fra_text', models.TextField(blank=True, null=True, verbose_name='French text')),
            ],
            options={
                'ordering': ['field_name'],
            },
        ),
        migrations.CreateModel(
            name='NJCRates',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('amount', models.FloatField()),
                ('last_modified', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'ordering': ['id'],
            },
        ),
        migrations.CreateModel(
            name='ProcessStep',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('description_en', models.TextField(blank=True, null=True, verbose_name='Description (en)')),
                ('description_fr', models.TextField(blank=True, null=True, verbose_name='Description (fr)')),
                ('stage', models.IntegerField(blank=True, choices=[(1, 'Travel Request Process Outline'), (2, 'Review Process Outline')], null=True)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Purpose',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('description_en', models.TextField(blank=True, null=True, verbose_name='Description (en)')),
                ('description_fr', models.TextField(blank=True, null=True, verbose_name='Description (fr)')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Reason',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
            ],
            options={
                'ordering': ['name'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ReviewerRole',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('order', models.IntegerField()),
            ],
            options={
                'ordering': ['order', 'id'],
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
            ],
            options={
                'ordering': ['name'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Status',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('name', models.CharField(max_length=255)),
                ('used_for', models.IntegerField(choices=[(1, 'Request Reviewer status'), (2, 'Trip Request status'), (3, 'Trip Reviewer status'), (4, 'Trip status')])),
                ('order', models.IntegerField(blank=True, null=True)),
                ('color', models.CharField(blank=True, max_length=10, null=True)),
            ],
            options={
                'ordering': ['used_for', 'order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='TripCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('days_when_eligible_for_review', models.IntegerField(verbose_name='Number of days before earliest date that is eligible for review')),
            ],
            options={
                'ordering': ['name'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='TripRequest',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_public_servant', models.BooleanField(choices=[(True, 'Yes'), (False, 'No')], default=True, verbose_name='Is the traveller a public servant?')),
                ('is_research_scientist', models.BooleanField(choices=[(True, 'Yes'), (False, 'No')], default=False, verbose_name='Is the traveller a research scientist (RES)?')),
                ('first_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='last name')),
                ('address', models.CharField(blank=True, max_length=1000, null=True, verbose_name='address')),
                ('phone', models.CharField(blank=True, max_length=1000, null=True, verbose_name='phone (xxx-xxx-xxxx)')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='email')),
                ('company_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='company name')),
                ('is_group_request', models.BooleanField(default=False, verbose_name='Is this a group request (i.e., a request for multiple individuals)?')),
                ('departure_location', models.CharField(blank=True, max_length=1000, null=True, verbose_name='departure location (city, province, country)')),
                ('destination', models.CharField(blank=True, max_length=1000, null=True, verbose_name='destination location (city, province, country)')),
                ('start_date', models.DateTimeField(blank=True, null=True, verbose_name='start date of travel')),
                ('end_date', models.DateTimeField(blank=True, null=True, verbose_name='end date of travel')),
                ('role_of_participant', models.TextField(blank=True, null=True, verbose_name='role description')),
                ('learning_plan', models.BooleanField(default=False, verbose_name='is this request included on your learning plan?')),
                ('objective_of_event', models.TextField(blank=True, null=True, verbose_name='what is the objective of this meeting or conference?')),
                ('benefit_to_dfo', models.TextField(blank=True, null=True, verbose_name='what are the benefits to DFO?')),
                ('late_justification', models.TextField(blank=True, null=True, verbose_name='justification for late submissions')),
                ('funding_source', models.TextField(blank=True, null=True, verbose_name='what is the funding source?')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='notes (optional)')),
                ('non_dfo_costs', models.FloatField(blank=True, null=True, verbose_name='amount of non-DFO funding (CAD)')),
                ('non_dfo_org', models.CharField(blank=True, max_length=1000, null=True, verbose_name='give the full name(s) of the of the organization(s) providing non-DFO funding')),
                ('submitted', models.DateTimeField(blank=True, null=True, verbose_name='date submitted')),
                ('original_submission_date', models.DateTimeField(blank=True, null=True, verbose_name='original submission date')),
                ('admin_notes', models.TextField(blank=True, null=True, verbose_name='Administrative notes')),
                ('exclude_from_travel_plan', models.BooleanField(default=False, verbose_name='Exclude this traveller from the travel plan?')),
                ('bta_attendees', models.ManyToManyField(blank=True, to=settings.AUTH_USER_MODEL, verbose_name='other attendees covered under BTA')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_requests_created_by', to=settings.AUTH_USER_MODEL, verbose_name='created by')),
                ('fiscal_year', models.ForeignKey(blank=True, default=2021, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_requests', to='shared_models.fiscalyear', verbose_name='fiscal year')),
                ('parent_request', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children_requests', to='travel.triprequest')),
                ('region', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_requests', to='shared_models.region', verbose_name='Traveller belongs to which DFO region?')),
                ('role', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, to='travel.role', verbose_name='role of traveller')),
                ('section', models.ForeignKey(null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_requests', to='shared_models.section', verbose_name='under which section is this request being made?')),
                ('status', models.ForeignKey(default=8, limit_choices_to={'used_for': 2}, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_requests', to='travel.status', verbose_name='trip request status')),
                ('trip', models.ForeignKey(null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_requests', to='travel.conference', verbose_name='trip')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='user_trip_requests', to=settings.AUTH_USER_MODEL, verbose_name='DM Apps user')),
            ],
            options={
                'verbose_name': 'trip request',
                'ordering': ['-start_date', 'last_name'],
                'unique_together': {('user', 'trip'), ('user', 'parent_request')},
            },
        ),
        migrations.CreateModel(
            name='TripSubcategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('description_en', models.TextField(blank=True, null=True, verbose_name='Description (en)')),
                ('description_fr', models.TextField(blank=True, null=True, verbose_name='Description (fr)')),
                ('name', models.CharField(max_length=255, verbose_name='name (en)')),
                ('trip_category', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='subcategories', to='travel.tripcategory')),
            ],
            options={
                'ordering': ['trip_category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='File',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='caption')),
                ('file', models.FileField(null=True, upload_to=travel.models.file_directory_path, verbose_name='file attachment')),
                ('date_created', models.DateTimeField(default=django.utils.timezone.now)),
                ('trip_request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='files', to='travel.triprequest')),
            ],
            options={
                'verbose_name': 'file',
                'ordering': ['trip_request', 'date_created'],
            },
        ),
        migrations.CreateModel(
            name='DefaultReviewer',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order', models.IntegerField(blank=True, null=True)),
                ('branches', models.ManyToManyField(blank=True, related_name='travel_default_reviewers', to='shared_models.Branch', verbose_name='reviewer belongs to which DFO branch(es)')),
                ('reviewer_roles', models.ManyToManyField(blank=True, limit_choices_to={'id__in': [3, 4, 5]}, related_name='travel_default_reviewers', to='travel.ReviewerRole', verbose_name='Do they have any special roles?')),
                ('sections', models.ManyToManyField(blank=True, related_name='travel_default_reviewers', to='shared_models.Section', verbose_name='reviewer belongs to which DFO section(s)')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.DO_NOTHING, related_name='travel_default_reviewers', to=settings.AUTH_USER_MODEL, verbose_name='DM Apps user')),
            ],
            options={
                'ordering': ['user'],
            },
        ),
        migrations.CreateModel(
            name='Cost',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='name (en)')),
                ('nom', models.CharField(blank=True, max_length=255, null=True, verbose_name='name (fr)')),
                ('cost_category', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='costs', to='travel.costcategory', verbose_name='category')),
            ],
            options={
                'ordering': ['cost_category', 'name'],
            },
        ),
        migrations.AddField(
            model_name='conference',
            name='status',
            field=models.ForeignKey(default=30, limit_choices_to={'used_for': 4}, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trips', to='travel.status', verbose_name='trip status'),
        ),
        migrations.AddField(
            model_name='conference',
            name='trip_subcategory',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trips', to='travel.tripsubcategory', verbose_name='trip purpose'),
        ),
        migrations.AddField(
            model_name='conference',
            name='verified_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='trips_verified_by', to=settings.AUTH_USER_MODEL, verbose_name='verified by'),
        ),
        migrations.CreateModel(
            name='TripReviewer',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order', models.IntegerField(null=True, verbose_name='process order')),
                ('status_date', models.DateTimeField(blank=True, null=True, verbose_name='status date')),
                ('comments', models.TextField(null=True, verbose_name='Comments')),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='travel.reviewerrole', verbose_name='role')),
                ('status', models.ForeignKey(default=23, limit_choices_to={'used_for': 3}, on_delete=django.db.models.deletion.DO_NOTHING, to='travel.status', verbose_name='review status')),
                ('trip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviewers', to='travel.conference')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_reviewers', to=settings.AUTH_USER_MODEL, verbose_name='DM Apps user')),
            ],
            options={
                'verbose_name': 'trip reviewer',
                'ordering': ['trip', 'order'],
                'unique_together': {('trip', 'user', 'role')},
            },
        ),
        migrations.CreateModel(
            name='TripRequestCost',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rate_cad', models.FloatField(blank=True, null=True, verbose_name='daily rate (CAD/day)')),
                ('number_of_days', models.FloatField(blank=True, null=True, verbose_name='number of days')),
                ('amount_cad', models.FloatField(blank=True, default=0, null=True, verbose_name='amount (CAD)')),
                ('cost', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='trip_request_costs', to='travel.cost', verbose_name='cost')),
                ('trip_request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='trip_request_costs', to='travel.triprequest', verbose_name='trip request')),
            ],
            options={
                'verbose_name': 'cost',
                'unique_together': {('trip_request', 'cost')},
            },
        ),
        migrations.CreateModel(
            name='Reviewer',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order', models.IntegerField(null=True, verbose_name='process order')),
                ('status_date', models.DateTimeField(blank=True, null=True, verbose_name='status date')),
                ('comments', models.TextField(null=True, verbose_name='Comments')),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='travel.reviewerrole', verbose_name='role')),
                ('status', models.ForeignKey(default=4, limit_choices_to={'used_for': 1}, on_delete=django.db.models.deletion.DO_NOTHING, to='travel.status', verbose_name='review status')),
                ('trip_request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviewers', to='travel.triprequest')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='reviewers', to=settings.AUTH_USER_MODEL, verbose_name='DM Apps user')),
            ],
            options={
                'verbose_name': 'reviewer',
                'ordering': ['trip_request', 'order'],
                'unique_together': {('trip_request', 'user', 'role')},
            },
        ),
    ]
