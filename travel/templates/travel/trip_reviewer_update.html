{% extends "travel/form.html" %}
{% load static %}
{% load bootstrap4 %}
{% load verbose_names %}
{% load custom_filters %}
{% load custom_tags %}
{% load i18n %}
{% load humanize %}


{% block pre_form_div %}
  <hr>
  <div id="app" v-cloak>
    {% include "travel/common/_trip_detail.html" %}
    {% include "travel/common/_travellers.html" %}
    {% include "travel/common/_reviewers.html" %}
  </div>
{% endblock %}



{% block form_fields %}
  <div class="mt-5">
    {% for field in form %}
      {% if field.name == 'comments' %}
        <h3>{% trans "Please provide your approval comments here (required)" %}</h3>
        {% bootstrap_field field show_label=False %}

      {% else %}
        {{ field }}
      {% endif %}

    {% endfor %}


  </div>
{% endblock %}


{% block body_js %}
  {{ block.super }}
  <script type="application/javascript">
  let isReview = true;
  </script>
  {% include "travel/common/_trip_script.html" %}


  <script type="application/javascript">
  $("#save").click(function () {
    $("#id_stay_on_page").val(1);
    $("form").submit();
  });

  $("#reset").click(function () {
    var input = confirm("{% trans 'By proceeding, you will be returning this review to the first reviewer in the queue: '%}  {{ object.trip.reviewers.first.user }} \n\n {%trans 'Are you certain you wish to proceed?'%}");
    $("#id_reset").val(1);
    $("form").submit();
  });

  </script>
{% endblock %}