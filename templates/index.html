{% extends "accounts/accounts_base.html" %}
{% load static %}
{% load i18n %}
{% load custom_filters %}

{% block bug_create %}{% url 'bugs:bug_create' 1 %}{% endblock bug_create %}
{% block header %}
    <style>
        body {
            background-image: url("{% static 'img/jeremy-cai-1174-unsplash.jpg' %}");
        {#background-color: #4acc28;#} background-size: cover;
        }

        .card-title {
            font-weight: bold;
        }

    </style>

{% endblock %}

{% block title %}
    {% trans 'Data Management Home' %}
{% endblock title %}

{% block body %}
    <br>
    <div class="container">

        <div class="jumbotron text-center">
            <h1 class="text-center">
                {% trans 'DFO Science Data Management' %}
            </h1>
            <hr>

            {% url 'accounts:login' as sign_in_url %}
            {% url 'accounts:signup' as sign_up_url %}


            <h4 class="text-center">
                {% if user.is_authenticated %}
                    {% blocktrans with name=user.first_name %}
                        Welcome back, {{ name }}! Please select an application below.
                    {% endblocktrans %}
                {% else %}
                    {% blocktrans %}
                        Welcome! Please <a href="{{ sign_in_url }}">sign in</a> or select an application below. If you do not have an
                        account, you can register for one
                        <a href="{{ sign_up_url }}">here</a>
                    {% endblocktrans %}
                {% endif %}
            </h4>

        </div>
    </div>

    <div class="container-fluid">
        {% trans "Go" as btn_text %}
        <div class="row" style="margin-bottom: 25px">
            {% for app in app_dict %}
                <div class="card text-dark border-dark mb-3" style="width: 16rem; margin-right: 25px; margin-left: 25px">
                    <div class="card-body">
                        <h5 class="card-title">
                            {{ app_dict|lookup:app|lookup:"title" }}
                            {% if app_dict|lookup:app|lookup:"status" == "beta" %}
                                <span class="badge badge-pill badge-warning" style="font-size: small">
                                                {% trans "beta" %}
                                            </span>
                            {% elif app_dict|lookup:app|lookup:"status" == "dev" %}
                                <span class="badge badge-pill badge-danger" style="font-size: small">
                                                {% trans "dev" %}
                                            </span>
                            {% endif %}

                        </h5>
                        <p class="card-text">
                            {{ app_dict|lookup:app|lookup:"description" }}
                        </p>

                    </div>
                    <div class="card-footer">
                        <a href="{{ app_dict|lookup:app|lookup:"url" }}" class="btn btn-primary">
                            {{ btn_text }}
                        </a>


                        {% trans "access to this app requires special permissions" as permissions_msg %}
                        {% trans "access to this app requires you to be logged in" as login_msg %}
                        {% trans "this app is opened to all users" as open_msg %}


                        {% if app_dict|lookup:app|lookup:"access" == "permission-required" %}
                            <span class="float-right" data-toggle="tooltip" title="{{ permissions_msg }}">
                                                <img src="{% static 'img/icons/iconfinder_lock_285646.svg' %}" alt="">
                                            </span>
                        {% elif app_dict|lookup:app|lookup:"access" == "login-required" %}
                            <span class="float-right" data-toggle="tooltip" title="{{ login_msg }}" style="width: 20px">
                                                <img src="{% static 'img/icons/iconfinder_user-avatar-human-admin-login_2203549.svg' %}"
                                                     alt="">
                                            </span>
                        {% else %}
                            <span class="float-right" data-toggle="tooltip" title="{{ open_msg }}">
                                                <img src="{% static 'admin/img/icon-yes.svg' %}" alt="">
                                            </span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>


        {##}
        {#            </tbody>#}
        {#        </table>#}

    </div>

    <script type="application/javascript">
        $(".request-access-button").click(function () {
            popitup("{% url 'accounts:request_access' %}", "popOutWindow")
        })

    </script>


{% endblock body %}
{# Blank template #}
{#        <div class="card {{ prod_card }} mb-3" style="width: {{ my_width }};">#}
{#            <div class="card-body">#}
{#                <h5 class="card-title">#}
{#                    {% trans "Regional Metadata Inventory" %}#}
{#                </h5>#}
{#                <p class="card-text">#}
{#                    {% trans "Tool for organizing and managing metadata of regional datasets and data resources." %}#}
{#                </p>#}
{#                <a href="#" class="btn btn-warning">#}
{#                    {% trans "Select" %}#}
{#                </a>#}
{#            </div>#}
{#        </div>#}