{% extends "accounts/accounts_base.html" %}
{% load static %}
{% load i18n %}
{% load custom_filters %}

{% block bug_create %}{% url 'bugs:bug_create' 1 %}{% endblock bug_create %}
{% block header %}
    <style>
        body {
            background-image: url("{% static 'img/ahmed-nishaath-1248803-unsplash.jpg' %}");
            background-size: cover;
        }
        .jumbotron{
            opacity: 0.85;
        }
        .card-title {
        {#font-weight: bold;#}
        }

    </style>

{% endblock %}

{% block title %}
    {% trans 'Data Management Home' %}
{% endblock title %}

{% block body %}
    <br>
    <div class="container">

        <div class="jumbotron text-center">
            <h1 class="text-center">
                {% trans 'DFO Science Data Management' %}
            </h1>
            <hr>

            {% url 'accounts:login' as sign_in_url %}
            {% url 'accounts:signup' as sign_up_url %}


            <h4 class="text-center">
                {% if user.is_authenticated %}
                    {% blocktrans with name=user.first_name %}
                        Welcome back, {{ name }}! Please select an application below.
                    {% endblocktrans %}
                {% else %}
                    {% blocktrans %}
                        Welcome! Please <a href="{{ sign_in_url }}">sign in</a> or select an application below. If you do not have an
                        account, you can register for one
                        <a href="{{ sign_up_url }}">here.</a>
                    {% endblocktrans %}
                {% endif %}
            </h4>

        </div>
    </div>

    <div class="container-fluid">
        {% trans "Select" as btn_text %}
        <div class="row" style="margin-bottom: 25px">
            {% for app in app_dict %}
                <div class="card bg-light " style="max-width: 20rem; margin-right: 35px; margin-left: 10px; margin-bottom: 20px">
                    <div class="card-body">
                        <h5 class="card-title">
                            {{ app_dict|lookup:app|lookup:"title" }}
                            {% if app_dict|lookup:app|lookup:"status" == "beta" %}
                                <span class="badge badge-pill badge-warning" style="font-size: small">
                                                {% trans "beta" %}
                                            </span>
                            {% elif app_dict|lookup:app|lookup:"status" == "dev" %}
                                <span class="badge badge-pill badge-danger" style="font-size: small">
                                                {% trans "dev" %}
                                            </span>
                            {% endif %}

                        </h5>
                        <p class="card-text">
                            {{ app_dict|lookup:app|lookup:"description" }}
                        </p>

                    </div>
                    <div class="card-footer">
                        <a href="{{ app_dict|lookup:app|lookup:"url" }}" class="btn btn-primary">
                            {{ btn_text }}
                        </a>


                        {% trans "access to this app requires special permissions" as permissions_msg %}
                        {% trans "access to this app requires you to be logged in" as login_msg %}
                        {% trans "this app is opened to all users" as open_msg %}


                        {% if app_dict|lookup:app|lookup:"access" == "permission-required" %}
                            <span class="float-right" data-toggle="tooltip" title="{{ permissions_msg }}">
                                                <img src="{% static 'img/icons/iconfinder_lock_285646.svg' %}" alt="">
                                            </span>
                        {% elif app_dict|lookup:app|lookup:"access" == "login-required" %}
                            <span class="float-right" data-toggle="tooltip" title="{{ login_msg }}" style="width: 20px">
                                                <img src="{% static 'img/icons/iconfinder_user-avatar-human-admin-login_2203549.svg' %}"
                                                     alt="">
                                            </span>
                        {% else %}
                            <span class="float-right" data-toggle="tooltip" title="{{ open_msg }}">
                                                <img src="{% static 'admin/img/icon-yes.svg' %}" alt="" width="120%">
                                            </span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>


        {##}
        {#            </tbody>#}
        {#        </table>#}

    </div>

    {#    <span style="background-color: white; font-size: x-small">#}
    {#        Photo:Jeremy Cai - https://unsplash.com/photos/mnF75FoPBWY#}
    {#    </span>#}
    <a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px"
       href="https://unsplash.com/@nihthu?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge"
       target="_blank" rel="noopener noreferrer" title="Download photos from Ahmed Nishaath"><span
            style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg"
                                                              style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white"
                                                              viewBox="0 0 32 32"><title>unsplash-logo</title><path
            d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></span><span style="display:inline-block;padding:2px 3px">Ahmed Nishaath</span></a>

    <script type="application/javascript">
        $(".request-access-button").click(function () {
            popitup("{% url 'accounts:request_access' %}", "popOutWindow")
        })

    </script>


{% endblock body %}
